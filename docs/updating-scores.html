<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Updating scores | OHI Global Assessment Guide</title>
  <meta name="description" content="A guide for conducting the OHI Global Assessment" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Updating scores | OHI Global Assessment Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A guide for conducting the OHI Global Assessment" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Updating scores | OHI Global Assessment Guide" />
  
  <meta name="twitter:description" content="A guide for conducting the OHI Global Assessment" />
  

<meta name="author" content="OHI Team" />


<meta name="date" content="2020-08-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-prep.html"/>
<link rel="next" href="finalizing-the-global-assessment.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">OHI Global Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#repositories-used-to-calculate-the-global-assessment"><i class="fa fa-check"></i><b>1.1</b> Repositories used to calculate the global assessment</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#ohiprep_v20"><i class="fa fa-check"></i><b>1.1.1</b> ohiprep_v20??</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#ohi-global"><i class="fa fa-check"></i><b>1.1.2</b> ohi-global</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#ohicore"><i class="fa fa-check"></i><b>1.1.3</b> ohicore</a></li>
<li class="chapter" data-level="1.1.4" data-path="index.html"><a href="index.html#globalfellows-issues"><i class="fa fa-check"></i><b>1.1.4</b> globalfellows-issues</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="starting-a-new-year.html"><a href="starting-a-new-year.html"><i class="fa fa-check"></i><b>2</b> Starting a new year</a><ul>
<li class="chapter" data-level="2.1" data-path="starting-a-new-year.html"><a href="starting-a-new-year.html#review-and-organize-relevant-issues"><i class="fa fa-check"></i><b>2.1</b> Review and organize relevant issues</a></li>
<li class="chapter" data-level="2.2" data-path="starting-a-new-year.html"><a href="starting-a-new-year.html#prepare-the-repositories"><i class="fa fa-check"></i><b>2.2</b> Prepare the repositories!</a><ul>
<li class="chapter" data-level="2.2.1" data-path="starting-a-new-year.html"><a href="starting-a-new-year.html#ohiprep-repository"><i class="fa fa-check"></i><b>2.2.1</b> ohiprep repository</a></li>
<li class="chapter" data-level="2.2.2" data-path="starting-a-new-year.html"><a href="starting-a-new-year.html#ohi-global-1"><i class="fa fa-check"></i><b>2.2.2</b> ohi-global</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="starting-a-new-year.html"><a href="starting-a-new-year.html#keeping-track-of-layer-progress"><i class="fa fa-check"></i><b>2.3</b> Keeping track of layer progress</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-prep.html"><a href="data-prep.html"><i class="fa fa-check"></i><b>3</b> Data Prep</a><ul>
<li class="chapter" data-level="3.1" data-path="data-prep.html"><a href="data-prep.html#file-organization"><i class="fa fa-check"></i><b>3.1</b> File organization</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-prep.html"><a href="data-prep.html#saving-external-data"><i class="fa fa-check"></i><b>3.1.1</b> Saving external data</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-prep.html"><a href="data-prep.html#vpn-setup-to-access-mazu"><i class="fa fa-check"></i><b>3.1.2</b> VPN Setup to Access Mazu</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-prep.html"><a href="data-prep.html#setting-up-rstudio-mazu-server"><i class="fa fa-check"></i><b>3.1.3</b> Setting up Rstudio Mazu Server</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-prep.html"><a href="data-prep.html#using-cyberduck-to-transfer-large-files"><i class="fa fa-check"></i><b>3.1.4</b> Using Cyberduck to Transfer Large Files</a></li>
<li class="chapter" data-level="3.1.5" data-path="data-prep.html"><a href="data-prep.html#globalprep-files"><i class="fa fa-check"></i><b>3.1.5</b> globalprep files</a></li>
<li class="chapter" data-level="3.1.6" data-path="data-prep.html"><a href="data-prep.html#intermediate-files-that-are-too-large-for-github"><i class="fa fa-check"></i><b>3.1.6</b> Intermediate files that are too large for Github</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-prep.html"><a href="data-prep.html#starting-a-new-data-prep-project"><i class="fa fa-check"></i><b>3.2</b> Starting a new data prep project</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-prep.html"><a href="data-prep.html#prepare-the-dataprep-folder"><i class="fa fa-check"></i><b>3.2.1</b> Prepare the dataprep folder</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-prep.html"><a href="data-prep.html#start-an-issue"><i class="fa fa-check"></i><b>3.2.2</b> Start an issue</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-prep.html"><a href="data-prep.html#update-the-files"><i class="fa fa-check"></i><b>3.2.3</b> Update the files</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-prep.html"><a href="data-prep.html#a-typical-data-prep-script"><i class="fa fa-check"></i><b>3.3</b> A typical data prep script</a></li>
<li class="chapter" data-level="3.4" data-path="data-prep.html"><a href="data-prep.html#prep-rmd-1.-summary"><i class="fa fa-check"></i><b>3.4</b> prep Rmd: 1. Summary</a></li>
<li class="chapter" data-level="3.5" data-path="data-prep.html"><a href="data-prep.html#prep-rmd-2.-updates"><i class="fa fa-check"></i><b>3.5</b> prep Rmd: 2. Updates</a></li>
<li class="chapter" data-level="3.6" data-path="data-prep.html"><a href="data-prep.html#prep-rmd-3.-data-sources"><i class="fa fa-check"></i><b>3.6</b> prep Rmd: 3. Data sources</a></li>
<li class="chapter" data-level="3.7" data-path="data-prep.html"><a href="data-prep.html#prep-rmd-4.-set-up"><i class="fa fa-check"></i><b>3.7</b> prep Rmd: 4. Set up</a><ul>
<li class="chapter" data-level="3.7.1" data-path="data-prep.html"><a href="data-prep.html#packages"><i class="fa fa-check"></i><b>3.7.1</b> Packages</a></li>
<li class="chapter" data-level="3.7.2" data-path="data-prep.html"><a href="data-prep.html#common.r"><i class="fa fa-check"></i><b>3.7.2</b> common.R</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-prep.html"><a href="data-prep.html#prep-rmd-5.-data-prep"><i class="fa fa-check"></i><b>3.8</b> prep Rmd: 5. Data prep</a><ul>
<li class="chapter" data-level="3.8.1" data-path="data-prep.html"><a href="data-prep.html#ohi-data-idiosyncracies-low-populationuninhabited-regions-and-grouped-regions"><i class="fa fa-check"></i><b>3.8.1</b> OHI data idiosyncracies: Low population/uninhabited regions and grouped regions</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="data-prep.html"><a href="data-prep.html#prep-rmd-6.-gapfilling"><i class="fa fa-check"></i><b>3.9</b> prep Rmd: 6. Gapfilling</a><ul>
<li class="chapter" data-level="3.9.1" data-path="data-prep.html"><a href="data-prep.html#training-linear-models-for-gapfilling"><i class="fa fa-check"></i><b>3.9.1</b> Training linear models for gapfilling</a></li>
<li class="chapter" data-level="3.9.2" data-path="data-prep.html"><a href="data-prep.html#saving-gapfilling-report-files"><i class="fa fa-check"></i><b>3.9.2</b> Saving gapfilling report files</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="data-prep.html"><a href="data-prep.html#prep-rmd-7.-results-check"><i class="fa fa-check"></i><b>3.10</b> prep Rmd: 7. Results check</a></li>
<li class="chapter" data-level="3.11" data-path="data-prep.html"><a href="data-prep.html#prep-rmd-8.-final-run"><i class="fa fa-check"></i><b>3.11</b> prep Rmd: 8. Final run</a></li>
<li class="chapter" data-level="3.12" data-path="data-prep.html"><a href="data-prep.html#notes-on-parallel-processing"><i class="fa fa-check"></i><b>3.12</b> Notes on parallel processing</a><ul>
<li class="chapter" data-level="3.12.1" data-path="data-prep.html"><a href="data-prep.html#stopcluster-makecluster"><i class="fa fa-check"></i><b>3.12.1</b> stopCluster &amp; makeCluster</a></li>
<li class="chapter" data-level="3.12.2" data-path="data-prep.html"><a href="data-prep.html#using-htop-to-check-on-processes-running"><i class="fa fa-check"></i><b>3.12.2</b> Using htop to check on processes running</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="updating-scores.html"><a href="updating-scores.html"><i class="fa fa-check"></i><b>4</b> Updating scores</a></li>
<li class="chapter" data-level="5" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html"><i class="fa fa-check"></i><b>5</b> Finalizing the global assessment</a><ul>
<li class="chapter" data-level="5.1" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#create-results-folder"><i class="fa fa-check"></i><b>5.1</b> Create results folder</a></li>
<li class="chapter" data-level="5.2" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#final-score-review"><i class="fa fa-check"></i><b>5.2</b> Final score review</a></li>
<li class="chapter" data-level="5.3" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#citation-management"><i class="fa fa-check"></i><b>5.3</b> Citation management</a><ul>
<li class="chapter" data-level="5.3.1" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#getting-zotero-and-rstudio-to-work-well-together"><i class="fa fa-check"></i><b>5.3.1</b> Getting Zotero and RStudio to work well together</a></li>
<li class="chapter" data-level="5.3.2" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#working-with-zotero"><i class="fa fa-check"></i><b>5.3.2</b> Working with Zotero</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#methods-document"><i class="fa fa-check"></i><b>5.4</b> Methods document</a><ul>
<li class="chapter" data-level="5.4.1" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#steps-to-updating-methods-document"><i class="fa fa-check"></i><b>5.4.1</b> Steps to updating methods document</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#results-document"><i class="fa fa-check"></i><b>5.5</b> Results document</a></li>
<li class="chapter" data-level="5.6" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#updates-document"><i class="fa fa-check"></i><b>5.6</b> Updates document</a></li>
<li class="chapter" data-level="5.7" data-path="finalizing-the-global-assessment.html"><a href="finalizing-the-global-assessment.html#upload-to-a-repository"><i class="fa fa-check"></i><b>5.7</b> Upload to a repository</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">OHI Global Assessment Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="updating-scores" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Updating scores</h1>
<p>After we have completed the data prep for a single layer, we update the information to the <a href="https://github.com/OHI-Science/ohi-global">OHI-global repository</a> to calculate global EEZ scores. Follow these steps to upload the data to OHI-global:</p>
<ol style="list-style-type: decimal">
<li>Make sure that all ohiprep_v20?? files are saved, committed and pushed to Github.</li>
<li>Ensure that OHI-global is cloned to your workspace and switch to that project in RStudio.</li>
<li>Pull most recent draft of ohi-global from Github.</li>
<li>Open metadata_documentation/layers_eez_base.csv and update the directory and filenames. (Other data may also need to be updated) You will need to export the csv file to your computer, edit it in Excel, then upload back into RStudio.</li>
<li>Update eez/conf/scenario_data_years.csv (this can be done in RStudio, as you will just be updating the data years in this file.)</li>
<li>Walk through eez/calculate_scores.R line by line.</li>
<li>As you go through, check output in Git window:</li>
</ol>
<ul>
<li>are the correct files being updated?</li>
<li>Do changes in score.csv seem reasonable?</li>
</ul>
<ol start="8" style="list-style-type: decimal">
<li>In the score_check() function at Step 10 in calculate_scores.R, check the scenario_year and change file_name to an alias representing the layer name (e.g. “np” for natural products)</li>
<li>Explore data in eez/score_check/layer_alias_score_check.html to see how this year’s data compare to last year’s.</li>
<li>If everything looks good (you might want to write down any outliers and take a screenshot of the commit comparison scatter to explore later), save, commit and push all of the changes to Github.</li>
<li>Post screenshot to Github issues for review.</li>
<li>Update the layers_checklist (Google spreadsheet) with the status of each layers and close Github issues as appropriate.</li>
</ol>
<p><strong>Downloadable checklist:</strong></p>
<p><img src="https://docs.google.com/drawings/d/e/2PACX-1vR2O34eRTfr6ekZBVXXwsqLwq_BJaSWauXrTHebhLYTgsAuKPccrIk3_gKeJCXvuL-Pxg_anSm2yDNs/pub?w=927&amp;h=585" /></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-prep.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="finalizing-the-global-assessment.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/OHI-Science/ohi-global-guide/edit/master/updating_scores.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
